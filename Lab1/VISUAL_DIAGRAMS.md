# ğŸ¨ VISUAL DIAGRAMS - LUá»’NG HOáº T Äá»˜NG

## ğŸ“Š KIáº¾N TRÃšC Tá»”NG QUAN

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Há»† THá»NG CHAT MESSAGE QUEUE                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CLIENTS    â”‚         â”‚   RABBITMQ   â”‚         â”‚    REDIS     â”‚
â”‚              â”‚         â”‚  (Broker)    â”‚         â”‚  (Storage)   â”‚
â”‚  - API       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚         â”‚              â”‚
â”‚  - Chat CLI  â”‚  AMQP   â”‚  - Queues    â”‚         â”‚ - Chat       â”‚
â”‚  - WebSocket â”‚         â”‚  - Exchanges â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤   History    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  Query  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ LUá»’NG 1: HTTP API (server.js)

### Step-by-Step Flow:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIENT  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. POST /login
     â”‚    {username: "Alice"}
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SERVER    â”‚
â”‚             â”‚
â”‚  Verify â”€â”€â”€â”€â”¼â”€â”€â–º Create JWT Token
â”‚             â”‚    {user: "Alice", exp: 1h}
â”‚             â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ 2. Response: {token: "eyJ..."}
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIENT  â”‚
â”‚ (LÆ°u    â”‚
â”‚  token) â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 3. POST /send-chat
     â”‚    Header: Bearer token
     â”‚    Body: {message: "Hello"}
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     4. Verify Token
â”‚   SERVER    â”‚        jwt.verify()
â”‚   (API)     â”‚             â”‚
â”‚             â”‚             â–¼ Token OK
â”‚             â”‚     5. Push to Queue
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
      â”‚                     â–¼
      â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚              â”‚  RABBITMQ   â”‚
      â”‚              â”‚             â”‚
      â”‚              â”‚ chat_queue  â”‚
      â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
      â”‚              â”‚ â”‚ Message â”‚ â”‚
      â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
      â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚                     â”‚
      â”‚ 6. Response         â”‚ 7. Consumer nháº­n
      â”‚    {status: OK}     â”‚
      â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIENT  â”‚         â”‚  CONSUMER   â”‚
â”‚         â”‚         â”‚  (Running   â”‚
â”‚         â”‚         â”‚   in server)â”‚
â”‚         â”‚         â”‚             â”‚
â”‚         â”‚         â”‚  Parse msg  â”‚
â”‚         â”‚         â”‚      â”‚      â”‚
â”‚         â”‚         â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜
â”‚         â”‚                â”‚
â”‚         â”‚                â”‚ 8. LÆ°u vÃ o Redis
â”‚         â”‚                â–¼
â”‚         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â”‚         â”‚    REDIS    â”‚
â”‚         â”‚         â”‚             â”‚
â”‚         â”‚         â”‚  lPush(     â”‚
â”‚         â”‚         â”‚  'chat_     â”‚
â”‚         â”‚         â”‚  history',  â”‚
â”‚         â”‚         â”‚  message)   â”‚
â”‚         â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚         â”‚
â”‚         â”‚ 9. GET /chat-history
â”‚         â–¼
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”‚   SERVER    â”‚    10. lRange('chat_history', 0, 19)
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
â”‚          â”‚
â”‚          â–¼
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”‚    REDIS    â”‚
â”‚   â”‚ Return 20   â”‚
â”‚   â”‚ messages    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
â”‚          â”‚
â”‚          â”‚ 11. Response: JSON array
â”‚          â–¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ LUá»’NG 2: QUEUE MODEL (chat.js)

### Váº¥n Ä‘á» vá»›i Queue Point-to-Point:

```
SCENARIO: 3 Users cÃ¹ng dÃ¹ng chat.js

User A                  RabbitMQ                User B
  â”‚                    chat_queue                 â”‚
  â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
  â”‚                   â”‚          â”‚                â”‚
  â”‚  "Hello" â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Message  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚    Nháº­n
  â”‚                   â”‚    #1    â”‚                â”‚  "A: Hello"
  â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
  â”‚                                                â”‚
  â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
  â”‚  "Hi" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Message  â”œâ”€â”€â”€â”€â”€â”          â”‚
  â”‚                   â”‚    #2    â”‚     â”‚          â”‚
  â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚          â”‚
  â”‚                                    â”‚          â”‚
  â”‚                                    â”‚   User C â”‚
  â”‚                                    â”‚     â”‚    â”‚
  â”‚                                    â””â”€â”€â”€â”€â–ºâ”‚    Nháº­n
  â”‚                                          â”‚  "A: Hi"
  â”‚                                          â”‚
  â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  "Bye" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Message  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  âŒ KhÃ´ng nháº­n
  â”‚                   â”‚    #3    â”‚          â”‚
  â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                       â”‚                 â”‚
  â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚    Nháº­n
  â”‚                                         â”‚  "A: Bye"
  â”‚                                      User B
  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš ï¸ Káº¾T LUáº¬N: Round-robin distribution
   â†’ KhÃ´ng pháº£i ai cÅ©ng nháº­n Ä‘á»§ messages
   â†’ KHÃ”NG phÃ¹ há»£p cho group chat
```

---

## ğŸ”„ LUá»’NG 3: EXCHANGE FANOUT (chat-realtime.js)

### Broadcast cho táº¥t cáº£:

```
SCENARIO: 3 Users cÃ¹ng dÃ¹ng chat-realtime.js

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      KHá»I Táº O                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User A join:
    â””â”€â–º Táº¡o Queue_A (exclusive, auto-delete)
    â””â”€â–º Bind Queue_A vÃ o Exchange 'chat_logs'

User B join:
    â””â”€â–º Táº¡o Queue_B (exclusive, auto-delete)
    â””â”€â–º Bind Queue_B vÃ o Exchange 'chat_logs'

User C join:
    â””â”€â–º Táº¡o Queue_C (exclusive, auto-delete)
    â””â”€â–º Bind Queue_C vÃ o Exchange 'chat_logs'

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Cáº¤U TRÃšC SAU KHI JOIN                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Exchange:       â”‚
                    â”‚  'chat_logs'     â”‚
                    â”‚  (Type: Fanout)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚              â”‚              â”‚
              â–¼              â–¼              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Queue A â”‚    â”‚ Queue B â”‚    â”‚ Queue C â”‚
        â”‚(amq.    â”‚    â”‚(amq.    â”‚    â”‚(amq.    â”‚
        â”‚gen-abc) â”‚    â”‚gen-def) â”‚    â”‚gen-ghi) â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
             â”‚              â”‚              â”‚
             â–¼              â–¼              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ User A  â”‚    â”‚ User B  â”‚    â”‚ User C  â”‚
        â”‚Consumer â”‚    â”‚Consumer â”‚    â”‚Consumer â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              USER A Gá»¬I MESSAGE "HELLO ALL"                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User A
  â”‚
  â”‚ publish("chat_logs", "", {from: "A", content: "Hello"})
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Exchange:       â”‚
â”‚  'chat_logs'     â”‚  â”€â”€â–º RabbitMQ tá»± Ä‘á»™ng COPY message
â”‚                  â”‚      Ä‘áº¿n Táº¤T Cáº¢ queues Ä‘Ã£ bind
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  â”‚  FANOUT = Copy Ä‘áº¿n táº¥t cáº£        â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚          â”‚          â”‚
    â–¼         â–¼          â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Queue A â”‚ â”‚Queue B â”‚ â”‚Queue C â”‚ â”‚Queue D â”‚ (náº¿u cÃ³)
â”‚        â”‚ â”‚        â”‚ â”‚        â”‚ â”‚        â”‚
â”‚Message â”‚ â”‚Message â”‚ â”‚Message â”‚ â”‚Message â”‚
â”‚ Copy 1 â”‚ â”‚ Copy 2 â”‚ â”‚ Copy 3 â”‚ â”‚ Copy 4 â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚          â”‚          â”‚          â”‚
    â–¼          â–¼          â–¼          â–¼
  User A     User B     User C     User D
    â”‚          â”‚          â”‚          â”‚
    â”‚          â”œâ”€â–º   Hiá»ƒn thá»‹      â”‚
    â”‚          â”‚   "A: Hello"       â”‚
    â”‚          â”‚                    â”‚
    â”‚          â–¼                    â–¼
    â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      â”‚ Screen  â”‚          â”‚ Screen  â”‚
    â”‚      â”‚ B:      â”‚          â”‚ C:      â”‚
    â”‚      â”‚ A: Helloâ”‚          â”‚ A: Helloâ”‚
    â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â””â”€â–º âŒ KhÃ´ng hiá»ƒn thá»‹ (if data.from !== username)

  Káº¾T LUáº¬N: Broadcasting thÃ nh cÃ´ng
   â†’ Táº¤T Cáº¢ users Ä‘á»u nháº­n message
   â†’ PHÃ™ Há»¢P cho group chat
```

---

## ğŸ“Š SO SÃNH QUEUE vs EXCHANGE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    QUEUE MODEL (chat.js)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         Producer              Queue             Consumers
                              â”Œâ”€â”€â”€â”€â”€â”
    User A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  M1 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º User B
                              â”œâ”€â”€â”€â”€â”€â”¤
    User A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  M2 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º User C
                              â”œâ”€â”€â”€â”€â”€â”¤
    User A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  M3 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º User B
                              â””â”€â”€â”€â”€â”€â”˜

    ğŸ“Š PhÃ¢n phá»‘i: Round-robin (1 message = 1 consumer)
      Use case: Load balancing, task queue
    âŒ Váº¥n Ä‘á»: KhÃ´ng phÃ¹ há»£p cho chat nhÃ³m


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 EXCHANGE FANOUT (chat-realtime.js)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              Exchange
                              â”Œâ”€â”€â”€â”€â”€â”
                              â”‚     â”‚
    User A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  M1 â”œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
                              â”‚     â”‚     â”‚     â”‚     â”‚
                              â””â”€â”€â”€â”€â”€â”˜     â”‚     â”‚     â”‚
                                          â–¼     â–¼     â–¼
                                       Queue Queue Queue
                                         A     B     C
                                         â”‚     â”‚     â”‚
                                         â–¼     â–¼     â–¼
                                       UserB UserC UserD


    ğŸ“Š PhÃ¢n phá»‘i: Copy Ä‘áº¿n Táº¤T Cáº¢ queues
      Use case: Group chat, broadcasting, notification
      Lá»£i Ã­ch: Má»i ngÆ°á»i Ä‘á»u nháº­n message
```

---

## ğŸ¯ PRODUCER-CONSUMER PATTERN

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TÃCH BIá»†T PRODUCER VÃ€ CONSUMER                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

API Request                Message Queue              Database
     â”‚                          â”‚                         â”‚
     â”‚  1. User gá»­i request     â”‚                         â”‚
     â”‚     POST /send-chat      â”‚                         â”‚
     â–¼                          â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚                         â”‚
â”‚Producer â”‚                     â”‚                         â”‚
â”‚  (API)  â”‚  2. Push message    â”‚                         â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                         â”‚
â”‚         â”‚    to Queue         â”‚                         â”‚
â”‚         â”‚                     â”‚                         â”‚
â”‚         â”‚  3. Response ngay   â”‚                         â”‚
â”‚         â”‚     (khÃ´ng chá» DB)  â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚                         â”‚
     â”‚                          â”‚                         â”‚
     â”‚   Fast response         â”‚                         â”‚
     â–¼                          â”‚                         â”‚
  Client                        â”‚  4. Consumer nháº­n       â”‚
  (Nháº­n OK)                     â”‚     message             â”‚
                                â–¼                         â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
                          â”‚Consumer â”‚  5. Xá»­ lÃ½ & lÆ°u DB  â”‚
                          â”‚ (Worker)â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
                          â”‚         â”‚                     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
                                                          â–¼
                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                    â”‚  Redis  â”‚
                                                    â”‚ Saved! â”‚
                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ˆ Lá»¢I ÃCH:
     API response nhanh (khÃ´ng block)
     Scalable (thÃªm nhiá»u consumers)
     Reliable (message khÃ´ng máº¥t náº¿u consumer crash)
     Decoupling (Producer vÃ  Consumer Ä‘á»™c láº­p)
```

---

## ğŸ” JWT AUTHENTICATION FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    JWT TOKEN LIFECYCLE                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Client                    Server                    Storage
  â”‚                         â”‚                          â”‚
  â”‚ 1. POST /login          â”‚                          â”‚
  â”‚    {username: "Alice"}  â”‚                          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                          â”‚
  â”‚                         â”‚                          â”‚
  â”‚                         â”‚ 2. Create JWT            â”‚
  â”‚                         â”‚    Payload: {            â”‚
  â”‚                         â”‚      user: "Alice",      â”‚
  â”‚                         â”‚      exp: 1h             â”‚
  â”‚                         â”‚    }                     â”‚
  â”‚                         â”‚    Sign with SECRET_KEY  â”‚
  â”‚                         â”‚                          â”‚
  â”‚ 3. Response             â”‚                          â”‚
  â”‚    {token: "eyJhb..."}  â”‚                          â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
  â”‚                         â”‚                          â”‚
  â”‚ ğŸ’¾ LÆ°u token            â”‚                          â”‚
  â”‚    (localStorage/       â”‚                          â”‚
  â”‚     memory)             â”‚                          â”‚
  â”‚                         â”‚                          â”‚
  â”‚ 4. POST /send-chat      â”‚                          â”‚
  â”‚    Header:              â”‚                          â”‚
  â”‚    Authorization:       â”‚                          â”‚
  â”‚    Bearer eyJhb...      â”‚                          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                          â”‚
  â”‚                         â”‚                          â”‚
  â”‚                         â”‚ 5. Verify token          â”‚
  â”‚                         â”‚    jwt.verify(token,     â”‚
  â”‚                         â”‚      SECRET_KEY)         â”‚
  â”‚                         â”‚                          â”‚
  â”‚                         â”‚   Token valid           â”‚
  â”‚                         â”‚ Extract user: "Alice"    â”‚
  â”‚                         â”‚                          â”‚
  â”‚                         â”‚ 6. Process request       â”‚
  â”‚                         â”‚    with authenticated    â”‚
  â”‚                         â”‚    user context          â”‚
  â”‚                         â”‚                          â”‚
  â”‚ 7. Response             â”‚                          â”‚
  â”‚    {status: "OK"}       â”‚                          â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
  â”‚                         â”‚                          â”‚

âŒ Náº¾U TOKEN SAI:
  â”‚ POST /send-chat         â”‚
  â”‚ (Invalid token)         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                         â”‚ âŒ jwt.verify() failed
  â”‚                         â”‚
  â”‚ â›” 403 Forbidden         â”‚
  â”‚ {error: "Token sai"}    â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```

---

## ğŸ’¾ REDIS DATA STRUCTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REDIS CHAT HISTORY                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Key: "chat_history"
Type: List (FIFO - First In First Out)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Redis List: chat_history                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Index 0 (Newest) â”‚ {"from":"Alice",          â”‚
â”‚                   â”‚  "content":"Hi all",       â”‚
â”‚                   â”‚  "time":"10:30:45"}       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Index 1          â”‚ {"from":"Bob",            â”‚
â”‚                   â”‚  "content":"Hello",        â”‚
â”‚                   â”‚  "time":"10:30:30"}       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Index 2          â”‚ {"from":"Alice",          â”‚
â”‚                   â”‚  "content":"Good morning", â”‚
â”‚                   â”‚  "time":"10:30:15"}       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ...              â”‚ ...                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Index 19 (Old)   â”‚ {"from":"Charlie"...}     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

OPERATIONS:
  lPush("chat_history", message)  â†’ ThÃªm vÃ o Ä‘áº§u list
  lRange("chat_history", 0, 19)   â†’ Láº¥y 20 tin má»›i nháº¥t
  lLen("chat_history")            â†’ Äáº¿m tá»•ng sá»‘ tin
  DEL("chat_history")             â†’ XÃ³a toÃ n bá»™
```

---

## ğŸ¬ TIMELINE: Message Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         HÃ€NH TRÃŒNH Cá»¦A 1 TIN NHáº®N (End-to-End)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Time  Event                                          Component
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0ms   User gÃµ "Hello" vÃ  nháº¥n Enter                 Client

1ms   HTTP POST /send-chat                          HTTP
      Header: Bearer token
      Body: {message: "Hello"}

5ms   Server nháº­n request                           Express

7ms   Verify JWT token                              JWT
        Token valid, user = "Alice"

10ms  Connect RabbitMQ                              AMQP
      channel.assertQueue()

15ms  sendToQueue("chat_queue", message)            RabbitMQ
      Message ID: msg-12345

18ms  Response {status: "OK"}                       HTTP
        Client nháº­n response (FAST!)

20ms  Consumer nháº­n message tá»« Queue                Consumer
      channel.consume() triggered

22ms  Parse message:                                Consumer
      {from: "Alice", content: "Hello"}

25ms  Connect Redis                                 Redis

30ms  lPush("chat_history", message)                Redis
        Saved to position 0

35ms  Consumer ack(msg)                             RabbitMQ
      Message deleted from Queue

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL: 35ms (nhÆ°ng client chá»‰ chá» 18ms!)

ğŸ’¡ Lá»£i Ã­ch cá»§a async processing:
   - Client chá»: 18ms
   - DB processing: 30ms
   - KhÃ´ng block user experience!
```

---

## ğŸ” DEBUG & MONITORING

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  RABBITMQ MANAGEMENT UI                        â”‚
â”‚                  http://localhost:15672                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Queues Tab   â”‚                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ chat_queue   â”‚ Ready: 0, Unacked: 0, Total: 1523         â”‚
â”‚              â”‚ Consumers: 1                               â”‚
â”‚              â”‚ Message rate: 5/s                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ amq.gen-abc  â”‚ Exclusive, Auto-delete                     â”‚
â”‚              â”‚ Bound to: chat_logs                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ExchangesTab â”‚                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ chat_logs    â”‚ Type: fanout                               â”‚
â”‚              â”‚ Bindings: 3 queues                         â”‚
â”‚              â”‚ Message rate in: 10/s                      â”‚
â”‚              â”‚ Message rate out: 30/s (10/s Ã— 3 queues)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        REDIS CLI                               â”‚
â”‚                    docker exec -it redis redis-cli             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

127.0.0.1:6379> LLEN chat_history
(integer) 523

127.0.0.1:6379> LRANGE chat_history 0 2
1) "{\"from\":\"Alice\",\"content\":\"Bye\",\"time\":\"10:35:00\"}"
2) "{\"from\":\"Bob\",\"content\":\"See you\",\"time\":\"10:34:55\"}"
3) "{\"from\":\"Alice\",\"content\":\"Hi\",\"time\":\"10:34:50\"}"
```

---

**ğŸ“ LÆ°u Ã½:** CÃ¡c diagrams nÃ y giÃºp báº¡n visualize luá»“ng data. Káº¿t há»£p vá»›i code vÃ  comments Ä‘á»ƒ hiá»ƒu sÃ¢u hÆ¡n!

**ğŸ’¡ Tip:** In file nÃ y ra vÃ  váº½ thÃªm notes cá»§a báº¡n lÃªn Ä‘Ã³!
